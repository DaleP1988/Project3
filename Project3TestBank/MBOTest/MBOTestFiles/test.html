<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


</head>

<body>

    <button class="button">
        click here
    </button>

    <div class="card">
        <div class="card-header">
            <h4>Test Getting Data with Click</h4>
        </div>
        <div class="card-body">
            <ul id="instructorData" class="list-group"></ul>
            <table id="table" class="table table-striped">
            </table>
        </div>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>

        $(".button").click(function () {


            $.ajax({
                url: "/class",
                method: "GET"
            }).then(function (result) {

                // Here we then log the tableData to console, where it will show up as an object.
                console.log(result);
                console.log("------------------------------------");
                var classList = result.Classes.Class;
                //use var to get deeper into the object

                for (var i = 0; i < classList.length; i++) {
                    // if () {

                    // }else {
                    //     alert("Instructor not Listed in Mind Body Online. Search for another instructor or take the Client Survey!")
                    // }



                    //need to add functionality to get the data by instructor name***
                    //ask about the weird div
                    //need to use moment.js for the time
                    //need to show/hide waitlist, spots left
                    //put the class details in a table within the card



                    // Get a reference to the tableList element and populate it with tables
                    var classData = $("#instructorData");

                    // Then display the fields in the HTML (Section Name, Date, URL)
                    var listItem = $("<li class='list-group-item mt-4'>");
                    var tableList = $("<th>");

                    listItem.append(
                        // $("<h2>").text("Client Data" + (i + 1)),
                        // $("<hr>"),

                        // CARD FORMAT: INSTRUCTOR 
                        $("<p>").text("Instructor: " + classList[i].Staff.Name),
                        $("<p>").text("Class Type: " + classList[i].ClassDescription.SessionType.Name),
                        $("<p>").text("Class Level: " + classList[i].ClassDescription.Level.Name),
                        $("<p>").text("Class Description " + classList[i].ClassDescription.Description),
                        $("<p>").text("Class Start Time" + classList[i].StartDateTime),
                        $("<p>").text("Class End Time" + classList[i].EndDateTime),
                        $("<p>").text("Location:" + classList[i].Location.City),
                        $("<p>").text("Address:"),
                        $("<hr>"),
                        $("<p>").text(classList[i].Location.Address),
                        $("<p>").text(classList[i].Location.Address2),

                        $("<p>").text("'Are there spots available?'  " + classList[i].IsAvailable),
                        $("<p>").text("Class Canceled?  " + classList[i].IsCanceled),
                        $("<p>").text("'Class is canceled. Can I get on the waitlist?'  " + classList[i].IsWaitlistAvailable),
                        $("<p>").text("'Do I pre-register or drop-in'  " + classList[i].ClassDescription.Program.ScheduleType),



                        // $("<h2>").text("Name: " + classData[i].customerName),
                        // $("<h2>").text("Email: " + classData[i].customerEmail),
                        // $("<h2>").text("Phone: " + classData[i].phoneNumber)

                    );
                    classData.append(listItem);


                    tableList.append(

                        $("<p>").text(classList[i].ClassDescription.Program.ScheduleType),
                        $("<p>").text(" Classes Available: " + classList[i].IsAvailable),
                        $("<p>").text(" Class Open: " + classList[i].IsCanceled),
                        $("<p>").text(" Waitlist:  " + classList[i].IsWaitlistAvailable),

                    );

                    classData.append(tableList);


                }

            });
        });




    </script>

</body>

</html>


<!-- 

// $("<p>").text("ID: " + classList[i].ClassDescription.Description + " = Class Desc"),
//                         $("<img>").attr("src", + classList[i].ClassDescription.Description.ImageURL + "= instructor image"),
//                         $("<p>").text("ID: " + classList[i].EndDateTime + "= Class End Time"),
//                         $("<p>").text("ID: " + classList[i].IsCanceled + "= Class Canceled?"),
//                         $("<p>").text("ID: " + classList[i].IsAvailable + "= Spots Open?"),
//                         $("<p>").text("ID: " + classList[i].IsWaitlistAvailable + "= Waitlist"),
//                         $("<p>").text("ID: " + classList[i].Staff.Name + "= Instructor Name"),
//                         $("<p>").text("ID: " + classList[i].ClassDescription.Level.Name + " = Class Level"),
//                         $("<p>").text("ID: " + classList[i].ClassDescription.Program.ScheduleType + " = How to Sign Up "),
//                         $("<p>").text("ID: " + classList[i].ClassDescription.SessionType.Name + "= Type of Class"),
//                         $("<p>").text("ID: " + classList[i].Location.Address + " = Address 1"),
//                         $("<p>").text("ID: " + classList[i].Location.Address2 + "= Address 2"),
//                         $("<p>").text("ID: " + classList[i].Location.City + " = Location City"),
//                         $("<p>").text("ID: " + classList[i].Staff.Name + " = Instructor Name"),
//                         $("<p>").text("ID: " + classList[i].Staff.FirstName + " = Instructor FirstName"),
//                         $("<p>").text("ID: " + classList[i].Staff.LastName + " = Instructor LastName "),
//                         $("<img>").attr("src", + classList[i].Staff.ImageURL + " = Staff Image "),
//                         $("<p>").text("ID: " + classList[i].StartDateTime + " = Class End Time"), -->